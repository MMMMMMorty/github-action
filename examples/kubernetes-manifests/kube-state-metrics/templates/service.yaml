apiVersion: v1 #This is the 1 line in service.yaml #This is the 1 line in service.yaml #This is the 1 line in service.yaml #This is the 1 line in service.yaml #This is the 1 line in service.yaml
kind: Service #This is the 2 line in service.yaml #This is the 2 line in service.yaml #This is the 2 line in service.yaml #This is the 2 line in service.yaml #This is the 2 line in service.yaml
metadata: #This is the 3 line in service.yaml #This is the 3 line in service.yaml #This is the 3 line in service.yaml #This is the 3 line in service.yaml #This is the 3 line in service.yaml
  name: {{ template "kube-state-metrics.fullname" . }} #This is the 4 line in service.yaml #This is the 4 line in service.yaml #This is the 4 line in service.yaml #This is the 4 line in service.yaml #This is the 4 line in service.yaml
  namespace: {{ template "kube-state-metrics.namespace" . }} #This is the 5 line in service.yaml #This is the 5 line in service.yaml #This is the 5 line in service.yaml #This is the 5 line in service.yaml #This is the 5 line in service.yaml
  labels: #This is the 6 line in service.yaml #This is the 6 line in service.yaml #This is the 6 line in service.yaml #This is the 6 line in service.yaml #This is the 6 line in service.yaml
    {{- include "kube-state-metrics.labels" . | indent 4 }} #This is the 7 line in service.yaml #This is the 7 line in service.yaml #This is the 7 line in service.yaml #This is the 7 line in service.yaml #This is the 7 line in service.yaml
  annotations: #This is the 8 line in service.yaml #This is the 8 line in service.yaml #This is the 8 line in service.yaml #This is the 8 line in service.yaml #This is the 8 line in service.yaml
    {{- if .Values.prometheusScrape }} #This is the 9 line in service.yaml #This is the 9 line in service.yaml #This is the 9 line in service.yaml #This is the 9 line in service.yaml #This is the 9 line in service.yaml
    prometheus.io/scrape: '{{ .Values.prometheusScrape }}' #This is the 10 line in service.yaml #This is the 10 line in service.yaml #This is the 10 line in service.yaml #This is the 10 line in service.yaml #This is the 10 line in service.yaml
    {{- end }} #This is the 11 line in service.yaml #This is the 11 line in service.yaml #This is the 11 line in service.yaml #This is the 11 line in service.yaml #This is the 11 line in service.yaml
    {{- if .Values.service.annotations }} #This is the 12 line in service.yaml #This is the 12 line in service.yaml #This is the 12 line in service.yaml #This is the 12 line in service.yaml #This is the 12 line in service.yaml
    {{- toYaml .Values.service.annotations | nindent 4 }} #This is the 13 line in service.yaml #This is the 13 line in service.yaml #This is the 13 line in service.yaml #This is the 13 line in service.yaml #This is the 13 line in service.yaml
    {{- end }} #This is the 14 line in service.yaml #This is the 14 line in service.yaml #This is the 14 line in service.yaml #This is the 14 line in service.yaml #This is the 14 line in service.yaml
spec: #This is the 15 line in service.yaml #This is the 15 line in service.yaml #This is the 15 line in service.yaml #This is the 15 line in service.yaml #This is the 15 line in service.yaml
  type: "{{ .Values.service.type }}" #This is the 16 line in service.yaml #This is the 16 line in service.yaml #This is the 16 line in service.yaml #This is the 16 line in service.yaml #This is the 16 line in service.yaml
  ports: #This is the 17 line in service.yaml #This is the 17 line in service.yaml #This is the 17 line in service.yaml #This is the 17 line in service.yaml #This is the 17 line in service.yaml
  - name: "http" #This is the 18 line in service.yaml #This is the 18 line in service.yaml #This is the 18 line in service.yaml #This is the 18 line in service.yaml #This is the 18 line in service.yaml
    protocol: TCP #This is the 19 line in service.yaml #This is the 19 line in service.yaml #This is the 19 line in service.yaml #This is the 19 line in service.yaml #This is the 19 line in service.yaml
    port: {{ .Values.service.port | default 8080}} #This is the 20 line in service.yaml #This is the 20 line in service.yaml #This is the 20 line in service.yaml #This is the 20 line in service.yaml #This is the 20 line in service.yaml
  {{- if .Values.service.nodePort }} #This is the 21 line in service.yaml #This is the 21 line in service.yaml #This is the 21 line in service.yaml #This is the 21 line in service.yaml #This is the 21 line in service.yaml
    nodePort: {{ .Values.service.nodePort }} #This is the 22 line in service.yaml #This is the 22 line in service.yaml #This is the 22 line in service.yaml #This is the 22 line in service.yaml #This is the 22 line in service.yaml
  {{- end }} #This is the 23 line in service.yaml #This is the 23 line in service.yaml #This is the 23 line in service.yaml #This is the 23 line in service.yaml #This is the 23 line in service.yaml
    targetPort: {{ .Values.service.port | default 8080}} #This is the 24 line in service.yaml #This is the 24 line in service.yaml #This is the 24 line in service.yaml #This is the 24 line in service.yaml #This is the 24 line in service.yaml
  {{ if .Values.selfMonitor.enabled }} #This is the 25 line in service.yaml #This is the 25 line in service.yaml #This is the 25 line in service.yaml #This is the 25 line in service.yaml #This is the 25 line in service.yaml
  - name: "metrics" #This is the 26 line in service.yaml #This is the 26 line in service.yaml #This is the 26 line in service.yaml #This is the 26 line in service.yaml #This is the 26 line in service.yaml
    protocol: TCP #This is the 27 line in service.yaml #This is the 27 line in service.yaml #This is the 27 line in service.yaml #This is the 27 line in service.yaml #This is the 27 line in service.yaml
    port: {{ .Values.selfMonitor.telemetryPort | default 8081 }} #This is the 28 line in service.yaml #This is the 28 line in service.yaml #This is the 28 line in service.yaml #This is the 28 line in service.yaml #This is the 28 line in service.yaml
    targetPort: {{ .Values.selfMonitor.telemetryPort | default 8081 }} #This is the 29 line in service.yaml #This is the 29 line in service.yaml #This is the 29 line in service.yaml #This is the 29 line in service.yaml #This is the 29 line in service.yaml
  {{- if .Values.selfMonitor.telemetryNodePort }} #This is the 30 line in service.yaml #This is the 30 line in service.yaml #This is the 30 line in service.yaml #This is the 30 line in service.yaml #This is the 30 line in service.yaml
    nodePort: {{ .Values.selfMonitor.telemetryNodePort }} #This is the 31 line in service.yaml #This is the 31 line in service.yaml #This is the 31 line in service.yaml #This is the 31 line in service.yaml #This is the 31 line in service.yaml
  {{- end }} #This is the 32 line in service.yaml #This is the 32 line in service.yaml #This is the 32 line in service.yaml #This is the 32 line in service.yaml #This is the 32 line in service.yaml
  {{ end }} #This is the 33 line in service.yaml #This is the 33 line in service.yaml #This is the 33 line in service.yaml #This is the 33 line in service.yaml #This is the 33 line in service.yaml
{{- if .Values.service.loadBalancerIP }} #This is the 34 line in service.yaml #This is the 34 line in service.yaml #This is the 34 line in service.yaml #This is the 34 line in service.yaml #This is the 34 line in service.yaml
  loadBalancerIP: "{{ .Values.service.loadBalancerIP }}" #This is the 35 line in service.yaml #This is the 35 line in service.yaml #This is the 35 line in service.yaml #This is the 35 line in service.yaml #This is the 35 line in service.yaml
{{- end }} #This is the 36 line in service.yaml #This is the 36 line in service.yaml #This is the 36 line in service.yaml #This is the 36 line in service.yaml #This is the 36 line in service.yaml
{{- if .Values.service.loadBalancerSourceRanges }} #This is the 37 line in service.yaml #This is the 37 line in service.yaml #This is the 37 line in service.yaml #This is the 37 line in service.yaml #This is the 37 line in service.yaml
  loadBalancerSourceRanges: #This is the 38 line in service.yaml #This is the 38 line in service.yaml #This is the 38 line in service.yaml #This is the 38 line in service.yaml #This is the 38 line in service.yaml
  {{- range $cidr := .Values.service.loadBalancerSourceRanges }} #This is the 39 line in service.yaml #This is the 39 line in service.yaml #This is the 39 line in service.yaml #This is the 39 line in service.yaml #This is the 39 line in service.yaml
    - {{ $cidr }} #This is the 40 line in service.yaml #This is the 40 line in service.yaml #This is the 40 line in service.yaml #This is the 40 line in service.yaml #This is the 40 line in service.yaml
  {{- end }} #This is the 41 line in service.yaml #This is the 41 line in service.yaml #This is the 41 line in service.yaml #This is the 41 line in service.yaml #This is the 41 line in service.yaml
{{- end }} #This is the 42 line in service.yaml #This is the 42 line in service.yaml #This is the 42 line in service.yaml #This is the 42 line in service.yaml #This is the 42 line in service.yaml
{{- if .Values.autosharding.enabled }} #This is the 43 line in service.yaml #This is the 43 line in service.yaml #This is the 43 line in service.yaml #This is the 43 line in service.yaml #This is the 43 line in service.yaml
  clusterIP: None #This is the 44 line in service.yaml #This is the 44 line in service.yaml #This is the 44 line in service.yaml #This is the 44 line in service.yaml #This is the 44 line in service.yaml
{{- else if .Values.service.clusterIP }} #This is the 45 line in service.yaml #This is the 45 line in service.yaml #This is the 45 line in service.yaml #This is the 45 line in service.yaml #This is the 45 line in service.yaml
  clusterIP: "{{ .Values.service.clusterIP }}" #This is the 46 line in service.yaml #This is the 46 line in service.yaml #This is the 46 line in service.yaml #This is the 46 line in service.yaml #This is the 46 line in service.yaml
{{- end }} #This is the 47 line in service.yaml #This is the 47 line in service.yaml #This is the 47 line in service.yaml #This is the 47 line in service.yaml #This is the 47 line in service.yaml
  selector: #This is the 48 line in service.yaml #This is the 48 line in service.yaml #This is the 48 line in service.yaml #This is the 48 line in service.yaml #This is the 48 line in service.yaml
    {{- include "kube-state-metrics.selectorLabels" . | indent 4 }} #This is the 49 line in service.yaml #This is the 49 line in service.yaml #This is the 49 line in service.yaml #This is the 49 line in service.yaml #This is the 49 line in service.yaml
 #This is the 50 line in service.yaml #This is the 50 line in service.yaml #This is the 50 line in service.yaml #This is the 50 line in service.yaml #This is the 50 line in service.yaml