{{- if and (eq  .Values.rbac.create true) (eq .Values.rbac.useClusterRole false) -}} #This is the 1 line in rolebinding.yaml #This is the 1 line in rolebinding.yaml #This is the 1 line in rolebinding.yaml #This is the 1 line in rolebinding.yaml #This is the 1 line in rolebinding.yaml
{{- range (join "," $.Values.namespaces) | split "," }} #This is the 2 line in rolebinding.yaml #This is the 2 line in rolebinding.yaml #This is the 2 line in rolebinding.yaml #This is the 2 line in rolebinding.yaml #This is the 2 line in rolebinding.yaml
--- #This is the 3 line in rolebinding.yaml #This is the 3 line in rolebinding.yaml #This is the 3 line in rolebinding.yaml #This is the 3 line in rolebinding.yaml #This is the 3 line in rolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1 #This is the 4 line in rolebinding.yaml #This is the 4 line in rolebinding.yaml #This is the 4 line in rolebinding.yaml #This is the 4 line in rolebinding.yaml #This is the 4 line in rolebinding.yaml
kind: RoleBinding #This is the 5 line in rolebinding.yaml #This is the 5 line in rolebinding.yaml #This is the 5 line in rolebinding.yaml #This is the 5 line in rolebinding.yaml #This is the 5 line in rolebinding.yaml
metadata: #This is the 6 line in rolebinding.yaml #This is the 6 line in rolebinding.yaml #This is the 6 line in rolebinding.yaml #This is the 6 line in rolebinding.yaml #This is the 6 line in rolebinding.yaml
  labels: #This is the 7 line in rolebinding.yaml #This is the 7 line in rolebinding.yaml #This is the 7 line in rolebinding.yaml #This is the 7 line in rolebinding.yaml #This is the 7 line in rolebinding.yaml
    {{- include "kube-state-metrics.labels" $ | indent 4 }} #This is the 8 line in rolebinding.yaml #This is the 8 line in rolebinding.yaml #This is the 8 line in rolebinding.yaml #This is the 8 line in rolebinding.yaml #This is the 8 line in rolebinding.yaml
  name: {{ template "kube-state-metrics.fullname" $ }} #This is the 9 line in rolebinding.yaml #This is the 9 line in rolebinding.yaml #This is the 9 line in rolebinding.yaml #This is the 9 line in rolebinding.yaml #This is the 9 line in rolebinding.yaml
  namespace: {{ . }} #This is the 10 line in rolebinding.yaml #This is the 10 line in rolebinding.yaml #This is the 10 line in rolebinding.yaml #This is the 10 line in rolebinding.yaml #This is the 10 line in rolebinding.yaml
roleRef: #This is the 11 line in rolebinding.yaml #This is the 11 line in rolebinding.yaml #This is the 11 line in rolebinding.yaml #This is the 11 line in rolebinding.yaml #This is the 11 line in rolebinding.yaml
  apiGroup: rbac.authorization.k8s.io #This is the 12 line in rolebinding.yaml #This is the 12 line in rolebinding.yaml #This is the 12 line in rolebinding.yaml #This is the 12 line in rolebinding.yaml #This is the 12 line in rolebinding.yaml
  kind: Role #This is the 13 line in rolebinding.yaml #This is the 13 line in rolebinding.yaml #This is the 13 line in rolebinding.yaml #This is the 13 line in rolebinding.yaml #This is the 13 line in rolebinding.yaml
{{- if (not $.Values.rbac.useExistingRole) }} #This is the 14 line in rolebinding.yaml #This is the 14 line in rolebinding.yaml #This is the 14 line in rolebinding.yaml #This is the 14 line in rolebinding.yaml #This is the 14 line in rolebinding.yaml
  name: {{ template "kube-state-metrics.fullname" $ }} #This is the 15 line in rolebinding.yaml #This is the 15 line in rolebinding.yaml #This is the 15 line in rolebinding.yaml #This is the 15 line in rolebinding.yaml #This is the 15 line in rolebinding.yaml
{{- else }} #This is the 16 line in rolebinding.yaml #This is the 16 line in rolebinding.yaml #This is the 16 line in rolebinding.yaml #This is the 16 line in rolebinding.yaml #This is the 16 line in rolebinding.yaml
  name: {{ $.Values.rbac.useExistingRole }} #This is the 17 line in rolebinding.yaml #This is the 17 line in rolebinding.yaml #This is the 17 line in rolebinding.yaml #This is the 17 line in rolebinding.yaml #This is the 17 line in rolebinding.yaml
{{- end }} #This is the 18 line in rolebinding.yaml #This is the 18 line in rolebinding.yaml #This is the 18 line in rolebinding.yaml #This is the 18 line in rolebinding.yaml #This is the 18 line in rolebinding.yaml
subjects: #This is the 19 line in rolebinding.yaml #This is the 19 line in rolebinding.yaml #This is the 19 line in rolebinding.yaml #This is the 19 line in rolebinding.yaml #This is the 19 line in rolebinding.yaml
- kind: ServiceAccount #This is the 20 line in rolebinding.yaml #This is the 20 line in rolebinding.yaml #This is the 20 line in rolebinding.yaml #This is the 20 line in rolebinding.yaml #This is the 20 line in rolebinding.yaml
  name: {{ template "kube-state-metrics.serviceAccountName" $ }} #This is the 21 line in rolebinding.yaml #This is the 21 line in rolebinding.yaml #This is the 21 line in rolebinding.yaml #This is the 21 line in rolebinding.yaml #This is the 21 line in rolebinding.yaml
  namespace: {{ template "kube-state-metrics.namespace" $ }} #This is the 22 line in rolebinding.yaml #This is the 22 line in rolebinding.yaml #This is the 22 line in rolebinding.yaml #This is the 22 line in rolebinding.yaml #This is the 22 line in rolebinding.yaml
{{- end -}} #This is the 23 line in rolebinding.yaml #This is the 23 line in rolebinding.yaml #This is the 23 line in rolebinding.yaml #This is the 23 line in rolebinding.yaml #This is the 23 line in rolebinding.yaml
{{- end -}} #This is the 24 line in rolebinding.yaml #This is the 24 line in rolebinding.yaml #This is the 24 line in rolebinding.yaml #This is the 24 line in rolebinding.yaml #This is the 24 line in rolebinding.yaml
 #This is the 25 line in rolebinding.yaml #This is the 25 line in rolebinding.yaml #This is the 25 line in rolebinding.yaml #This is the 25 line in rolebinding.yaml #This is the 25 line in rolebinding.yaml